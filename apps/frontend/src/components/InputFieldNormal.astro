---
interface Props {
  id: string;
  label: string;
  type?: 'text' | 'email' | 'password' | 'number' | 'tel' | 'url' | 'search' | 'date' | 'time' | 'datetime-local' | 'month' | 'week' | 'color' | 'file' | 'hidden' | 'range' | 'checkbox' | 'radio';
  required?: boolean;
  placeholder?: string;
}

const { id, label, type = 'text', required = false, placeholder } = Astro.props;
---

<div class="input-group">
  <label for={id}>{label}</label>
  <input
    id={id}
    name={id}
    type={type}
    required={required}
    placeholder={placeholder}
    aria-required={required ? "true" : "false"}
    class="rotating-input"
  />
</div>

<style>
  .input-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  label {
    font-weight: 500;
    color: #FFFFFF;
  }
  input {
    padding: 0.75rem;
    border: 1px solid rgb(80, 80, 80);
    border-radius: 20px;
    font-size: 1rem;
    background: rgb(30, 30, 30);
    color: #FFFFFF;
    transition: transform 0.7s cubic-bezier(.68,-0.55,.27,1.55);
  }
  input:focus {
    outline: 2px solid rgb(203, 163, 35);
    outline-offset: 2px;
  }
  .rotating-input.rotate {
    transform: rotate(360deg);
  }
  .rotating-input.rotate-continuous {
    animation: spin 1s linear infinite;
  }
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // Cible uniquement l'input avec l'id "street"
  const input = document.getElementById('street');
  if (!input) return;
  input.classList.add('rotating-input');
  input.addEventListener('focus', () => {
    input.classList.add('rotate-continuous');
  });
  input.addEventListener('blur', () => {
    input.classList.remove('rotate-continuous');
  });
});
</script>
